import{t as y,r as M,j as c}from"./index-xKhDYqZ9.js";import{_ as V}from"./inheritsLoose-B6jfs0L0.js";import"./setPrototypeOf-DgZC2w_0.js";function S(a){return a&&a.stopPropagation&&a.stopPropagation(),a&&a.preventDefault&&a.preventDefault(),!1}function N(a){return a==null?[]:Array.isArray(a)?a.slice():[a]}function _(a){return a!==null&&a.length===1?a[0]:a.slice()}function w(a){Object.keys(a).forEach(p=>{typeof document<"u"&&document.addEventListener(p,a[p],!1)})}function b(a,p){return k(function(o,t){let e=o;return e<=t.min&&(e=t.min),e>=t.max&&(e=t.max),e}(a,p),p)}function k(a,p){const o=(a-p.min)%p.step;let t=a-o;return 2*Math.abs(o)>=p.step&&(t+=o>0?p.step:-p.step),parseFloat(t.toFixed(5))}let T=function(a){function p(t){var e;(e=a.call(this,t)||this).onKeyUp=()=>{e.onEnd()},e.onMouseUp=()=>{e.onEnd(e.getMouseEventMap())},e.onTouchEnd=s=>{s.preventDefault(),e.onEnd(e.getTouchEventMap())},e.onBlur=()=>{e.setState({index:-1},e.onEnd(e.getKeyDownEventMap()))},e.onMouseMove=s=>{e.setState({pending:!0});const r=e.getMousePosition(s),l=e.getDiffPosition(r[0]),h=e.getValueFromPosition(l);e.move(h)},e.onTouchMove=s=>{if(s.touches.length>1)return;e.setState({pending:!0});const r=e.getTouchPosition(s);if(e.isScrolling===void 0){const u=r[0]-e.startPosition[0],d=r[1]-e.startPosition[1];e.isScrolling=Math.abs(d)>Math.abs(u)}if(e.isScrolling)return void e.setState({index:-1});const l=e.getDiffPosition(r[0]),h=e.getValueFromPosition(l);e.move(h)},e.onKeyDown=s=>{if(!(s.ctrlKey||s.shiftKey||s.altKey||s.metaKey))switch(e.setState({pending:!0}),s.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":s.preventDefault(),e.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":s.preventDefault(),e.moveUpByStep();break;case"Home":s.preventDefault(),e.move(e.props.min);break;case"End":s.preventDefault(),e.move(e.props.max);break;case"PageDown":s.preventDefault(),e.moveDownByStep(e.props.pageFn(e.props.step));break;case"PageUp":s.preventDefault(),e.moveUpByStep(e.props.pageFn(e.props.step))}},e.onSliderMouseDown=s=>{if(!e.props.disabled&&s.button!==2){if(e.setState({pending:!0}),!e.props.snapDragDisabled){const r=e.getMousePosition(s);e.forceValueFromPosition(r[0],l=>{e.start(l,r[0]),w(e.getMouseEventMap())})}S(s)}},e.onSliderClick=s=>{if(!e.props.disabled&&e.props.onSliderClick&&!e.hasMoved){const r=e.getMousePosition(s),l=b(e.calcValue(e.calcOffsetFromPosition(r[0])),e.props);e.props.onSliderClick(l)}},e.createOnKeyDown=s=>r=>{e.props.disabled||(e.start(s),w(e.getKeyDownEventMap()),S(r))},e.createOnMouseDown=s=>r=>{if(e.props.disabled||r.button===2)return;e.setState({pending:!0});const l=e.getMousePosition(r);e.start(s,l[0]),w(e.getMouseEventMap()),S(r)},e.createOnTouchStart=s=>r=>{if(e.props.disabled||r.touches.length>1)return;e.setState({pending:!0});const l=e.getTouchPosition(r);e.startPosition=l,e.isScrolling=void 0,e.start(s,l[0]),w(e.getTouchEventMap()),function(h){h.stopPropagation&&h.stopPropagation()}(r)},e.handleResize=()=>{const s=window.setTimeout(()=>{e.pendingResizeTimeouts.shift(),e.resize()},0);e.pendingResizeTimeouts.push(s)},e.renderThumb=(s,r)=>{const l=e.props.thumbClassName+" "+e.props.thumbClassName+"-"+r+" "+(e.state.index===r?e.props.thumbActiveClassName:""),h={ref:d=>{e["thumb"+r]=d},key:e.props.thumbClassName+"-"+r,className:l,style:s,onMouseDown:e.createOnMouseDown(r),onTouchStart:e.createOnTouchStart(r),onFocus:e.createOnKeyDown(r),tabIndex:0,role:"slider","aria-orientation":e.props.orientation,"aria-valuenow":e.state.value[r],"aria-valuemin":e.props.min,"aria-valuemax":e.props.max,"aria-label":Array.isArray(e.props.ariaLabel)?e.props.ariaLabel[r]:e.props.ariaLabel,"aria-labelledby":Array.isArray(e.props.ariaLabelledby)?e.props.ariaLabelledby[r]:e.props.ariaLabelledby,"aria-disabled":e.props.disabled},u={index:r,value:_(e.state.value),valueNow:e.state.value[r]};return e.props.ariaValuetext&&(h["aria-valuetext"]=typeof e.props.ariaValuetext=="string"?e.props.ariaValuetext:e.props.ariaValuetext(u)),e.props.renderThumb(h,u)},e.renderTrack=(s,r,l)=>{const h={key:e.props.trackClassName+"-"+s,className:e.props.trackClassName+" "+e.props.trackClassName+"-"+s,style:e.buildTrackStyle(r,e.state.upperBound-l)},u={index:s,value:_(e.state.value)};return e.props.renderTrack(h,u)};let n=N(t.value);n.length||(n=N(t.defaultValue)),e.pendingResizeTimeouts=[];const i=[];for(let s=0;s<n.length;s+=1)n[s]=b(n[s],t),i.push(s);return e.resizeObserver=null,e.resizeElementRef=y.createRef(),e.state={index:-1,upperBound:0,sliderLength:0,value:n,zIndices:i},e}V(p,a);var o=p.prototype;return o.componentDidMount=function(){typeof window<"u"&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},p.getDerivedStateFromProps=function(t,e){const n=N(t.value);return n.length?e.pending?null:{value:n.map(i=>b(i,t))}:null},o.componentDidUpdate=function(){this.state.upperBound===0&&this.resize()},o.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},o.onEnd=function(t){t&&function(e){Object.keys(e).forEach(n=>{typeof document<"u"&&document.removeEventListener(n,e[n],!1)})}(t),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},o.getValue=function(){return _(this.state.value)},o.getClosestIndex=function(t){let e=Number.MAX_VALUE,n=-1;const{value:i}=this.state,s=i.length;for(let r=0;r<s;r+=1){const l=this.calcOffset(i[r]),h=Math.abs(t-l);h<e&&(e=h,n=r)}return n},o.getMousePosition=function(t){return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},o.getTouchPosition=function(t){const e=t.touches[0];return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},o.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},o.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},o.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},o.getValueFromPosition=function(t){const e=t/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return b(this.state.startValue+e,this.props)},o.getDiffPosition=function(t){let e=t-this.state.startPosition;return this.props.invert&&(e*=-1),e},o.resize=function(){const{slider:t,thumb0:e}=this;if(!t||!e)return;const n=this.sizeKey(),i=t.getBoundingClientRect(),s=t[n],r=i[this.posMaxKey()],l=i[this.posMinKey()],h=e.getBoundingClientRect()[n.replace("client","").toLowerCase()],u=s-h,d=Math.abs(r-l);this.state.upperBound===u&&this.state.sliderLength===d&&this.state.thumbSize===h||this.setState({upperBound:u,sliderLength:d,thumbSize:h})},o.calcOffset=function(t){const e=this.props.max-this.props.min;return e===0?0:(t-this.props.min)/e*this.state.upperBound},o.calcValue=function(t){return t/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},o.calcOffsetFromPosition=function(t){const{slider:e}=this,n=e.getBoundingClientRect(),i=n[this.posMaxKey()],s=n[this.posMinKey()];let r=t-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?i:s));return this.props.invert&&(r=this.state.sliderLength-r),r-=this.state.thumbSize/2,r},o.forceValueFromPosition=function(t,e){const n=this.calcOffsetFromPosition(t),i=this.getClosestIndex(n),s=b(this.calcValue(n),this.props),r=this.state.value.slice();r[i]=s;for(let l=0;l<r.length-1;l+=1)if(r[l+1]-r[l]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:r},()=>{e(i),this.fireChangeEvent("onChange")})},o.clearPendingResizeTimeouts=function(){do{const t=this.pendingResizeTimeouts.shift();clearTimeout(t)}while(this.pendingResizeTimeouts.length)},o.start=function(t,e){const n=this["thumb"+t];n&&n.focus();const{zIndices:i}=this.state;i.splice(i.indexOf(t),1),i.push(t),this.setState(s=>({startValue:s.value[t],startPosition:e!==void 0?e:s.startPosition,index:t,zIndices:i}))},o.moveUpByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=b(this.props.invert&&this.props.orientation==="horizontal"?e-t:e+t,this.props);this.move(Math.min(n,this.props.max))},o.moveDownByStep=function(t){t===void 0&&(t=this.props.step);const e=this.state.value[this.state.index],n=b(this.props.invert&&this.props.orientation==="horizontal"?e+t:e-t,this.props);this.move(Math.max(n,this.props.min))},o.move=function(t){const e=this.state.value.slice(),{index:n}=this.state,{length:i}=e,s=e[n];if(t===s)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:r,max:l,min:h,minDistance:u}=this.props;if(!r){if(n>0){const d=e[n-1];t<d+u&&(t=d+u)}if(n<i-1){const d=e[n+1];t>d-u&&(t=d-u)}}e[n]=t,r&&i>1&&(t>s?(this.pushSucceeding(e,u,n),function(d,f,g,x){for(let m=0;m<d;m+=1){const v=x-m*g;f[d-1-m]>v&&(f[d-1-m]=v)}}(i,e,u,l)):t<s&&(this.pushPreceding(e,u,n),function(d,f,g,x){for(let m=0;m<d;m+=1){const v=x+m*g;f[m]<v&&(f[m]=v)}}(i,e,u,h))),this.setState({value:e},this.fireChangeEvent.bind(this,"onChange"))},o.pushSucceeding=function(t,e,n){let i,s;for(i=n,s=t[i]+e;t[i+1]!==null&&s>t[i+1];i+=1,s=t[i]+e)t[i+1]=k(s,this.props)},o.pushPreceding=function(t,e,n){for(let i=n,s=t[i]-e;t[i-1]!==null&&s<t[i-1];i-=1,s=t[i]-e)t[i-1]=k(s,this.props)},o.axisKey=function(){return this.props.orientation==="vertical"?"Y":"X"},o.orthogonalAxisKey=function(){return this.props.orientation==="vertical"?"X":"Y"},o.posMinKey=function(){return this.props.orientation==="vertical"?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},o.posMaxKey=function(){return this.props.orientation==="vertical"?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},o.sizeKey=function(){return this.props.orientation==="vertical"?"clientHeight":"clientWidth"},o.fireChangeEvent=function(t){this.props[t]&&this.props[t](_(this.state.value),this.state.index)},o.buildThumbStyle=function(t,e){const n={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(e)+1};return n[this.posMinKey()]=t+"px",n},o.buildTrackStyle=function(t,e){const n={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return n[this.posMinKey()]=t,n[this.posMaxKey()]=e,n},o.buildMarkStyle=function(t){var e;return(e={position:"absolute"})[this.posMinKey()]=t,e},o.renderThumbs=function(t){const{length:e}=t,n=[];for(let s=0;s<e;s+=1)n[s]=this.buildThumbStyle(t[s],s);const i=[];for(let s=0;s<e;s+=1)i[s]=this.renderThumb(n[s],s);return i},o.renderTracks=function(t){const e=[],n=t.length-1;e.push(this.renderTrack(0,0,t[0]));for(let i=0;i<n;i+=1)e.push(this.renderTrack(i+1,t[i],t[i+1]));return e.push(this.renderTrack(n+1,t[n],this.state.upperBound)),e},o.renderMarks=function(){let{marks:t}=this.props;const e=this.props.max-this.props.min+1;return typeof t=="boolean"?t=Array.from({length:e}).map((n,i)=>i):typeof t=="number"&&(t=Array.from({length:e}).map((n,i)=>i).filter(n=>n%t==0)),t.map(parseFloat).sort((n,i)=>n-i).map(n=>{const i=this.calcOffset(n),s={key:n,className:this.props.markClassName,style:this.buildMarkStyle(i)};return this.props.renderMark(s)})},o.render=function(){const t=[],{value:e}=this.state,n=e.length;for(let l=0;l<n;l+=1)t[l]=this.calcOffset(e[l],l);const i=this.props.withTracks?this.renderTracks(t):null,s=this.renderThumbs(t),r=this.props.marks?this.renderMarks():null;return y.createElement("div",{ref:l=>{this.slider=l,this.resizeElementRef.current=l},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},i,s,r)},p}(y.Component);T.displayName="ReactSlider",T.defaultProps={min:0,max:100,step:1,pageFn:a=>10*a,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:a=>y.createElement("div",a),renderTrack:a=>y.createElement("div",a),renderMark:a=>y.createElement("span",a)};var F=T;function U({thresholds:a,onChange:p}){var j,E,C,D,P,z;const[o,t]=M.useState(a.overruleMin||72),[e,n]=M.useState(a.overruleMax||75),i=((j=a.manualReview)==null?void 0:j.min)||60,s=((E=a.manualReview)==null?void 0:E.max)||75;M.useEffect(()=>{t(a.overruleMin||72),n(a.overruleMax||75)},[a]);const r=B=>{const[K,O]=B;t(K),n(O);const R={...a,overruleMin:K,overruleMax:O};try{localStorage.setItem("credit_thresholds",JSON.stringify(R))}catch(L){console.error("Error saving thresholds to localStorage:",L)}p&&p(R)},l=((C=a.rejected)==null?void 0:C.min)||0,h=((D=a.rejected)==null?void 0:D.max)||60,u=((P=a.approved)==null?void 0:P.min)||75,d=((z=a.approved)==null?void 0:z.max)||100,f=(h-l)/100*100,g=(s-i)/100*100,x=(d-u)/100*100,m=(l-0)/100*100,v=(i-0)/100*100,A=(u-0)/100*100;return c.jsxs("div",{className:"threshold-balance",children:[c.jsxs("div",{className:"threshold-balance__legend",children:[c.jsxs("div",{className:"threshold-balance__legend-bar",children:[c.jsx("div",{className:"threshold-balance__segment threshold-balance__segment--rejected",style:{left:`${m}%`,width:`${f}%`},children:c.jsxs("span",{className:"threshold-balance__segment-text",children:[l," - ",h]})}),c.jsx("div",{className:"threshold-balance__segment threshold-balance__segment--manual-review",style:{left:`${v}%`,width:`${g}%`},children:c.jsxs("span",{className:"threshold-balance__segment-text",children:[i," - ",s]})}),c.jsx("div",{className:"threshold-balance__segment threshold-balance__segment--approved",style:{left:`${A}%`,width:`${x}%`},children:c.jsxs("span",{className:"threshold-balance__segment-text",children:[u," - ",d]})})]}),c.jsxs("div",{className:"threshold-balance__legend-labels",children:[c.jsx("div",{className:"threshold-balance__legend-label",style:{width:`${f}%`},children:c.jsx("span",{className:"threshold-balance__legend-label-text",children:"Rejected"})}),c.jsx("div",{className:"threshold-balance__legend-label",style:{width:`${g}%`},children:c.jsx("span",{className:"threshold-balance__legend-label-text",children:"Manual Review"})}),c.jsx("div",{className:"threshold-balance__legend-label",style:{width:`${x}%`},children:c.jsx("span",{className:"threshold-balance__legend-label-text",children:"Approved"})})]})]}),c.jsxs("div",{className:"threshold-balance__overrule",children:[c.jsxs("div",{className:"threshold-balance__overrule-label",children:["Overrule Manual Review Approval (",o,"-",e,")"]}),c.jsxs("div",{className:"threshold-balance__overrule-slider-wrapper",children:[c.jsx("div",{className:"threshold-balance__overrule-slider-background"}),c.jsx("div",{className:"threshold-balance__overrule-slider-container",style:{left:`${v}%`,width:`${g}%`},children:c.jsx(F,{className:"threshold-balance__slider",thumbClassName:"threshold-balance__slider-thumb",trackClassName:"threshold-balance__slider-track",min:i,max:s,value:[o,e],onChange:r,minDistance:1})})]})]})]})}function J(){const a={rejected:{min:0,max:60},manualReview:{min:60,max:75},approved:{min:75,max:100},overruleMin:72,overruleMax:75},p=()=>{try{const n=localStorage.getItem("credit_thresholds");if(n){const i=JSON.parse(n);return{...a,...i}}}catch(n){console.error("Error loading thresholds:",n)}return a},[o,t]=M.useState(p);M.useEffect(()=>{const n=()=>{t(p())};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[]),M.useEffect(()=>{localStorage.setItem("credit_thresholds",JSON.stringify(o))},[o]);const e=n=>{t(n)};return c.jsxs("div",{className:"settings-page",children:[c.jsxs("div",{className:"settings-page__header",children:[c.jsx("h1",{className:"settings-page__title",children:"Settings"}),c.jsx("p",{className:"settings-page__subtitle",children:"Configure credit approval thresholds and system preferences"})]}),c.jsx("div",{className:"settings-page__content",children:c.jsxs("div",{className:"settings-section",children:[c.jsx("h2",{className:"settings-section__title",children:"Threshold Balance"}),c.jsx("p",{className:"settings-section__description",children:"Adjust the credit score ranges for automatic decision making. The overrule review range allows manual intervention for scores that would normally require review."}),c.jsx(U,{thresholds:o,onChange:e})]})})]})}export{J as default};
