import{j as e,u as b,i as P,r as j,k as C,l as I}from"./index-DNAaTtSt.js";import{S as k}from"./react-select.esm-BZrkR-5E.js";import{S as w}from"./StepIndicator-B7GmfFl4.js";import{g as v,a as m,p as y}from"./products-CjT88-rF.js";import{s as N,g as D}from"./creditApplicationStorage-CWb-_15N.js";import{T as S}from"./Toast-D2SR_lEB.js";import"./Select-ef7c0426.esm-Ca8WOobY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./floating-ui.dom-2mXtW4pO.js";function F({label:c,name:r,value:i,onChange:a,options:h=[],placeholder:d="Select a product",required:x=!1,disabled:_=!1,helpText:l,error:n,className:s=""}){const o=r||c,t=!!n,q=({label:u,product:p})=>{if(!p)return u;const f=p.icon,g=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p.price);return e.jsxs("div",{className:"product-option",children:[e.jsx("div",{className:"product-option__icon",children:f&&e.jsx(f,{})}),e.jsxs("div",{className:"product-option__content",children:[e.jsx("div",{className:"product-option__name",children:u}),e.jsxs("div",{className:"product-option__sku",children:["SKU: ",p.sku]})]}),e.jsx("div",{className:"product-option__price",children:g})]})};return e.jsxs("div",{className:`product-select-group ${s}`,children:[c&&e.jsxs("label",{htmlFor:o,className:"form-label",children:[c,x&&e.jsx("span",{className:"text-danger",children:" *"})]}),e.jsx(k,{inputId:o,name:r,value:i,onChange:u=>a==null?void 0:a(u),options:h,placeholder:d,isDisabled:_,classNamePrefix:"react-select",className:t?"is-invalid":"",formatOptionLabel:q,isClearable:!0}),l&&!t&&e.jsx("div",{className:"form-text",children:l}),t&&e.jsx("div",{className:"invalid-feedback d-block",children:n})]})}function z(){const c=b(),r=P(),[i,a]=j.useState(null),[h,d]=j.useState(!1);j.useEffect(()=>{var s;if((s=r.state)!=null&&s.product){const o=r.state.product.id,t=v(o);t&&(a({value:t.id,label:t.name,product:t}),d(!0),N(m(t))),c(r.pathname,{replace:!0,state:{}})}else{const o=D();if(o){const t=v(o.id);t&&(a({value:t.id,label:t.name,product:t}),d(!0))}}},[r.state,c,r.pathname]);const x=[{label:"Product",description:"Selection"},{label:"Identity",description:"Verification"},{label:"Details",description:"Loan Details"},{label:"Review",description:"Application"}],_=s=>{a(s),d(!!s),s!=null&&s.product?N(m(s.product)):N(null)},l=()=>{if(!i){S.error("Please select a product first");return}c("/credit-request/scan-id",{state:{product:m(i.product)}})},n=()=>{if(!i){S.error("Please select a product first");return}c("/credit-request/search-customer",{state:{product:m(i.product)}})};return e.jsxs("div",{className:"credit-request-page",children:[e.jsxs("div",{className:"credit-request-page__header",children:[e.jsx("h1",{className:"credit-request-page__title",children:"Credit Application"}),e.jsx("p",{className:"credit-request-page__subtitle",children:"Select a product and choose how to proceed with the credit application"})]}),e.jsxs("div",{className:"credit-request-page__content",children:[e.jsx(w,{steps:x,currentStep:1}),e.jsxs("div",{className:"credit-request-page__main",children:[e.jsx(F,{label:"Select Product",name:"product",value:i,onChange:_,options:y,placeholder:"Choose a kitchen appliance...",required:!0,helpText:""}),h&&i&&e.jsx("div",{className:"credit-request-page__actions",children:e.jsxs("div",{className:"credit-request-page__options",children:[e.jsx("h3",{className:"credit-request-page__options-title",children:"Apply for Credit"}),e.jsx("p",{className:"credit-request-page__options-subtitle",children:"Choose how you want to proceed:"}),e.jsxs("div",{className:"credit-request-options",children:[e.jsxs("button",{className:"credit-request-option",onClick:l,children:[e.jsx("div",{className:"credit-request-option__icon",children:e.jsx(C,{})}),e.jsxs("div",{className:"credit-request-option__content",children:[e.jsx("h4",{className:"credit-request-option__title",children:"Scan ID Card"}),e.jsx("p",{className:"credit-request-option__description",children:"Capture customer ID document using camera"})]})]}),e.jsxs("button",{className:"credit-request-option",onClick:n,children:[e.jsx("div",{className:"credit-request-option__icon",children:e.jsx(I,{})}),e.jsxs("div",{className:"credit-request-option__content",children:[e.jsx("h4",{className:"credit-request-option__title",children:"Search Customer"}),e.jsx("p",{className:"credit-request-option__description",children:"Find existing customer by email or ID number"})]})]})]})]})})]})]})]})}export{z as default};
