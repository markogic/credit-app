import{i as b,u as R,j as e,B as m,h as E,A as P,C as A,D as h,z as N,p as g}from"./index-B5oqQfuu.js";import{S as f}from"./StepIndicator-Cyy8RdIP.js";import{g as C}from"./products-CCmYG3A5.js";function O(){var d,o,v,_,u,p;const l=b(),n=R(),r=(d=l.state)==null?void 0:d.product,c=r?C(r.id):null,a=(o=l.state)==null?void 0:o.customer;(v=l.state)==null||v.idImage;const i=(_=l.state)==null?void 0:_.extractedData;(u=l.state)==null||u.method;const s=((p=l.state)==null?void 0:p.creditDecision)||{decision:"APPROVED",score:85,maxApprovedAmount:(r==null?void 0:r.price)||0,interestRate:3.75,termMonths:24,monthlyPayment:((r==null?void 0:r.price)||0)*1.0375/24},j=[{label:"Product",description:"Selection"},{label:"Identity",description:"Verification"},{label:"Details",description:"Loan Details"},{label:"Review",description:"Application"}],y=()=>{localStorage.removeItem("credit_application_state"),n("/credit-request")},x=()=>{n("/")};if(!c)return e.jsx("div",{className:"review-application-screen",children:e.jsxs("div",{className:"review-application-screen__error",children:[e.jsx("p",{children:"Application information not found. Please start over."}),e.jsx(m,{label:"Go Back",onClick:()=>n("/credit-request"),variant:"btn-primary"})]})});const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c.price),w=s.monthlyPayment>0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s.monthlyPayment):"$0.00";return e.jsxs("div",{className:"review-application-screen",children:[e.jsxs("div",{className:"review-application-screen__header",children:[e.jsx("h1",{className:"review-application-screen__title",children:"Application Review"}),e.jsx("p",{className:"review-application-screen__subtitle",children:"Review your credit application details and decision"})]}),e.jsxs("div",{className:"review-application-screen__content",children:[e.jsx(f,{steps:j,currentStep:4}),e.jsxs("div",{className:"review-application-screen__main",children:[e.jsxs("div",{className:"review-summary-grid",children:[e.jsx("div",{className:"review-summary__section review-summary__section--status",children:e.jsxs("div",{className:`decision-card decision-card--${s.decision.toLowerCase()}`,children:[e.jsx("div",{className:"decision-card__icon",children:s.decision==="APPROVED"?e.jsx(E,{}):s.decision==="REJECTED"?e.jsx(P,{}):s.decision==="ERROR"?e.jsx(A,{}):e.jsx(h,{})}),e.jsx("h2",{className:"decision-card__title",children:s.decision==="APPROVED"?s.isOverruleApproval?"Credit Approved (Overrule)":"Credit Approved!":s.decision==="REJECTED"?"Credit Rejected":s.decision==="ERROR"?"Processing Error":"Manual Review Required"}),s.decision==="APPROVED"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"decision-card__message",children:s.isOverruleApproval?`Your credit application has been approved via overrule (score range ${s.overruleMin}-${s.overruleMax}). Review the details below.`:"Your credit application has been approved. Review the details below."}),e.jsx("div",{className:"decision-card__actions",children:e.jsx(m,{label:"Prepare & Sign Contract",onClick:()=>n("/credit-request/contract-signing",{state:{product:r,customer:a,extractedData:i,creditDecision:s}}),variant:"btn-primary"})})]}),s.decision==="REJECTED"&&e.jsx("p",{className:"decision-card__message",children:"Unfortunately, your credit application has been rejected. Please contact support for more information."}),s.decision==="MANUAL_REVIEW"&&e.jsx("p",{className:"decision-card__message",children:"Your application requires manual review. You will be notified of the decision within 2-3 business days."}),s.decision==="ERROR"&&e.jsx("p",{className:"decision-card__message",children:s.errorMessage||"An error occurred while processing your application. Please try again later."})]})}),(s.decision==="APPROVED"||s.decision==="MANUAL_REVIEW")&&e.jsx("div",{className:"review-summary__section",children:e.jsxs("div",{className:"review-summary__content",children:[e.jsxs("h3",{className:"review-summary__title",children:[e.jsx(N,{}),"Credit Terms"]}),e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Approved Amount:"}),e.jsx("span",{className:"review-summary__value review-summary__value--price",children:t})]}),s.interestRate&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Interest Rate:"}),e.jsxs("span",{className:"review-summary__value",children:[s.interestRate,"%"]})]}),s.termMonths&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Term:"}),e.jsxs("span",{className:"review-summary__value",children:[s.termMonths," months"]})]}),s.monthlyPayment>0&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Monthly Payment:"}),e.jsx("span",{className:"review-summary__value review-summary__value--price",children:w})]}),s.score&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Credit Score:"}),e.jsxs("span",{className:"review-summary__value",children:[s.score,"/100"]})]}),s.isOverruleApproval&&s.overruleMin!==null&&s.overruleMax!==null&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Overrule Range:"}),e.jsxs("span",{className:"review-summary__value",children:[s.overruleMin,"-",s.overruleMax]})]})]})}),s.decision==="REJECTED"&&s.score&&e.jsxs("div",{className:"review-summary__section",children:[e.jsxs("h3",{className:"review-summary__title",children:[e.jsx(N,{}),"Credit Terms"]}),e.jsx("div",{className:"review-summary__content",children:e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Credit Score:"}),e.jsxs("span",{className:"review-summary__value",children:[s.score,"/100"]})]})})]}),(a||i)&&e.jsxs("div",{className:"review-summary__section",children:[e.jsxs("h3",{className:"review-summary__title",children:[e.jsx(g,{}),"Customer Information"]}),e.jsxs("div",{className:"review-summary__content",children:[e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Name:"}),e.jsx("span",{className:"review-summary__value",children:(a==null?void 0:a.fullName)||(i==null?void 0:i.fullName)||"N/A"})]}),((a==null?void 0:a.idNumber)||(i==null?void 0:i.idNumber))&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"ID Number:"}),e.jsx("span",{className:"review-summary__value",children:(a==null?void 0:a.idNumber)||(i==null?void 0:i.idNumber)})]}),(a==null?void 0:a.email)&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Email:"}),e.jsx("span",{className:"review-summary__value",children:a.email})]}),((a==null?void 0:a.personalNumber)||(i==null?void 0:i.personalNumber))&&e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Personal Number:"}),e.jsx("span",{className:"review-summary__value",children:(a==null?void 0:a.personalNumber)||(i==null?void 0:i.personalNumber)})]})]})]}),e.jsxs("div",{className:"review-summary__section",children:[e.jsxs("h3",{className:"review-summary__title",children:[e.jsx(h,{}),"Product Information"]}),e.jsxs("div",{className:"review-summary__content",children:[e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Product:"}),e.jsx("span",{className:"review-summary__value",children:c.name})]}),e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"SKU:"}),e.jsx("span",{className:"review-summary__value",children:c.sku})]}),e.jsxs("div",{className:"review-summary__item",children:[e.jsx("span",{className:"review-summary__label",children:"Price:"}),e.jsx("span",{className:"review-summary__value review-summary__value--price",children:t})]})]})]})]}),e.jsxs("div",{className:"review-application-screen__actions",children:[e.jsx(m,{label:"Back to Dashboard",onClick:x,variant:"btn-outline"}),e.jsx(m,{label:"Start New Application",onClick:y,variant:"btn-primary"})]})]})]})]})}export{O as default};
